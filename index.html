<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Äá»“ng Há»“ Ká»¹ Thuáº­t Sá»‘</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif; /* Use Inter font */
            background-color: #1a202c; /* Dark background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden; /* Prevent scrolling */
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <div class="flex flex-col items-center justify-center p-6 bg-gray-800 rounded-3xl shadow-lg transform hover:scale-105 transition-transform duration-300 ease-in-out w-11/12 md:w-3/4 lg:w-1/2 xl:w-2/5">
        <h1 class="text-3xl md:text-4xl font-bold mb-4 text-emerald-400 text-center"></h1>
        
        <!-- Display Date, Month, Year (Gregorian Calendar) -->
        <div id="date-display" class="text-xl md:text-2xl font-medium text-gray-300 mb-2 bg-gray-700 px-5 py-2 rounded-xl text-center w-full">
            <!-- Gregorian Date will be updated by JavaScript -->
        </div>

        <!-- Display Moon Phase -->
        <div id="moon-phase-display" class="text-xl md:text-2xl font-medium text-purple-300 mb-2 bg-gray-700 px-5 py-2 rounded-xl text-center w-full">
            <!-- Moon Phase will be updated by JavaScript -->
        </div>

        <!-- Display Approximate Lunar Calendar -->
        <div id="lunar-date-display" class="text-xl md:text-2xl font-medium text-yellow-300 mb-4 bg-gray-700 px-5 py-2 rounded-xl text-center w-full">
            <!-- Lunar Date will be updated by JavaScript -->
        </div>

        <!-- Display Hour, Minute, Second -->
        <div id="time-display" class="text-5xl md:text-7xl font-extrabold text-white mb-6 bg-gray-700 p-5 rounded-xl shadow-inner tracking-wider w-full text-center">
            <!-- Time will be updated by JavaScript -->
        </div>

        <!-- Timezone section and detection button -->
        <div class="flex flex-col items-center mb-4 w-full">
            <button id="get-timezone-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl shadow-md transition-all duration-300 ease-in-out transform hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 mb-3 w-auto md:w-3/4 lg:w-2/3">
                <!-- Button text will be updated by JavaScript -->
            </button>
            <div id="timezone-info" class="text-lg md:text-xl font-semibold text-teal-300 bg-gray-700 px-4 py-2 rounded-lg text-center w-full">
                <!-- Timezone info will be displayed here -->
            </div>
            <p id="geolocation-status" class="text-sm text-gray-400 mt-2 text-center">
                <!-- Geolocation status will be displayed here -->
            </p>
        </div>

        <!-- Background music control section -->
        <div class="w-full flex flex-col items-center p-4 bg-gray-700 rounded-xl shadow-md">
            <h2 class="text-2xl font-bold mb-3 text-emerald-300" id="music-section-title"></h2>
            
            <!-- Audio element for background music -->
            <audio id="background-music" loop>
            <source src="marshmello-alone.mp3" type="audio/mpeg">
            TrÃ¬nh duyá»‡t cá»§a báº¡n khÃ´ng há»— trá»£ audio.
        </audio>

            <button id="toggle-music-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-1.5 px-4 rounded-xl shadow-md transition-all duration-300 ease-in-out transform hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-75 w-auto">
                <!-- Music toggle button text will be updated by JavaScript -->
            </button>
            <p id="music-disclaimer" class="text-sm text-gray-400 mt-2 text-center"></p>
        </div>

        <!-- Contact information -->
        <div class="text-gray-500 text-sm mt-4 text-center" id="contact-info">
            <p></p>
            <p></p>
            <p></p>
        </div>
        
    </div>

    <script>
        // Object containing all translated strings for different languages
        const translations = {
            'vi-VN': {
                title: "Äá»“ng Há»“ Ká»¹ Thuáº­t Sá»‘",
                moonPhases: [
                    "TrÄƒng non", "TrÄƒng lÆ°á»¡i liá»m Ä‘áº§u thÃ¡ng", "TrÄƒng bÃ¡n nguyá»‡t Ä‘áº§u thÃ¡ng",
                    "TrÄƒng khuyáº¿t Ä‘áº§u thÃ¡ng", "TrÄƒng trÃ²n", "TrÄƒng khuyáº¿t cuá»‘i thÃ¡ng",
                    "TrÄƒng bÃ¡n nguyá»‡t cuá»‘i thÃ¡ng", "TrÄƒng lÆ°á»¡i liá»m cuá»‘i thÃ¡ng"
                ],
                lunarMonths: [
                    "GiÃªng", "Hai", "Ba", "TÆ°", "NÄƒm", "SÃ¡u",
                    "Báº£y", "TÃ¡m", "ChÃ­n", "MÆ°á»i", "MÆ°á»i Má»™t", "Cháº¡p"
                ],
                lunarDateTemplate: "NgÃ y {day}, ThÃ¡ng {month}, NÄƒm {year}",
                lunarDisclaimer: "(Ã‚m lá»‹ch - Xáº¥p xá»‰)",
                timezoneButton: "XÃ¡c Ä‘á»‹nh MÃºi giá» cá»§a tÃ´i",
                timezoneInfoDefault: "Äang hiá»ƒn thá»‹ mÃºi giá» há»‡ thá»‘ng cá»§a báº¡n.",
                timezoneInfoSystem: "MÃºi giá» há»‡ thá»‘ng: ",
                timezoneError: "KhÃ´ng thá»ƒ láº¥y mÃºi giá» há»‡ thá»‘ng.",
                geolocationAttempt: "Äang cá»‘ gáº¯ng xÃ¡c Ä‘á»‹nh vá»‹ trÃ­...",
                geolocationSuccess: "Vá»‹ trÃ­: Lat {lat}, Lon {lon}. Thá»i gian hiá»ƒn thá»‹ theo mÃºi giá» há»‡ thá»‘ng cá»§a báº¡n.",
                geolocationDenied: "Báº¡n Ä‘Ã£ tá»« chá»‘i quyá»n truy cáº­p vá»‹ trÃ­. Vui lÃ²ng cho phÃ©p Ä‘á»ƒ xÃ¡c Ä‘á»‹nh vá»‹ trÃ­.",
                geolocationUnavailable: "ThÃ´ng tin vá»‹ trÃ­ khÃ´ng kháº£ dá»¥ng.",
                geolocationTimeout: "YÃªu cáº§u xÃ¡c Ä‘á»‹nh vá»‹ trÃ­ Ä‘Ã£ háº¿t thá»i gian.",
                geolocationUnknownError: "ÄÃ£ xáº£y ra lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh khi xÃ¡c Ä‘á»‹nh vá»‹ trÃ­.",
                geolocationNotSupported: "TrÃ¬nh duyá»‡t cá»§a báº¡n khÃ´ng há»— trá»£ Geolocation API.",
                madeBy: "ÄÆ°á»£c táº¡o bá»Ÿi Richard",
                contactEmail: "Email: ",
                contactUs: "(LiÃªn há»‡ chÃºng tÃ´i Ä‘á»ƒ sá»­a lá»—i khi trang web gáº·p sá»± cá»‘ hoáº·c lá»—i mÃºi giá»)",
                musicSectionTitle: "Nháº¡c Ná»n",
                playMusicButton: "Báº­t Nháº¡c",
                pauseMusicButton: "Táº¯t Nháº¡c",
                musicDisclaimer: "LÆ°u Ã½: Báº¡n khÃ´ng thá»ƒ phÃ¡t nháº¡c trá»±c tiáº¿p tá»« Spotify/YouTube. HÃ£y dÃ¹ng link MP3 trá»±c tiáº¿p. Nháº¥n nÃºt Ä‘á»ƒ báº­t/táº¯t nháº¡c."
            },
            'en-US': {
                title: "Digital Clock",
                moonPhases: [
                    "New Moon", "Waxing Crescent", "First Quarter",
                    "Waxing Gibbous", "Full Moon", "Waning Gibbous",
                    "Last Quarter", "Waning Crescent"
                ],
                lunarMonths: [
                    "Lunar January", "Lunar February", "Lunar March", "Lunar April", "Lunar May", "Lunar June",
                    "Lunar July", "Lunar August", "Lunar September", "Lunar October", "Lunar November", "Lunar December" 
                ],
                lunarDateTemplate: "Lunar Day {day}, Lunar Month {month}, Year {year}",
                lunarDisclaimer: "(Approx.)",
                timezoneButton: "Detect My Timezone",
                timezoneInfoDefault: "Displaying your system timezone.",
                timezoneInfoSystem: "System Timezone: ",
                timezoneError: "Could not retrieve system timezone.",
                geolocationAttempt: "Attempting to detect location...",
                geolocationSuccess: "Location: Lat {lat}, Lon {lon}. Time displayed according to your system timezone.",
                geolocationDenied: "You denied location access. Please allow to detect location.",
                geolocationUnavailable: "Location information is unavailable.",
                geolocationTimeout: "Location request timed out.",
                geolocationUnknownError: "An unknown error occurred while detecting location.",
                geolocationNotSupported: "Your browser does not support Geolocation API.",
                madeBy: "Made by Richard",
                contactEmail: "Email: ",
                contactUs: "(Contact us to fix errors when the website has problems or timezone errors)",
                musicSectionTitle: "Background Music",
                playMusicButton: "Play Music",
                pauseMusicButton: "Pause Music",
                musicDisclaimer: "Note: You cannot play music directly from Spotify/YouTube. Use a direct MP3 link. Click to toggle music."
            },
            'fr-FR': {
                title: "Horloge NumÃ©rique",
                moonPhases: [
                    "Nouvelle Lune", "Premier Croissant", "Premier Quartier",
                    "Lune Gibbeuse Croissante", "Pleine Lune", "Lune Gibbeuse DÃ©croissante",
                    "Dernier Quartier", "Dernier Croissant"
                ],
                lunarMonths: [
                    "Janvier Lunaire", "FÃ©vrier Lunaire", "Mars Lunaire", "Avril Lunaire", "Mai Lunaire", "Juin Lunaire",
                    "Juillet Lunaire", "AoÃ»t Lunaire", "Septembre Lunaire", "Octobre Lunaire", "Novembre Lunaire", "DÃ©cembre Lunaire"
                ],
                lunarDateTemplate: "Jour lunaire {day}, Mois lunaire {month}, AnnÃ©e {year}",
                lunarDisclaimer: "(Approx.)",
                timezoneButton: "DÃ©tecter mon fuseau horaire",
                timezoneInfoDefault: "Affichage de votre fuseau horaire systÃ¨me.",
                timezoneInfoSystem: "Fuseau horaire du systÃ¨me : ",
                timezoneError: "Impossible de rÃ©cupÃ©rer le fuseau horaire systÃ¨me.",
                geolocationAttempt: "Tentative de dÃ©tection de l'emplacement...",
                geolocationSuccess: "Emplacement : Lat {lat}, Lon {lon}. L'heure est affichÃ©e selon le fuseau horaire de votre systÃ¨me.",
                geolocationDenied: "Vous avez refusÃ© l'accÃ¨s Ã  la localisation. Veuillez l'autoriser pour dÃ©tecter l'emplacement.",
                geolocationUnavailable: "Les informations de localisation ne sont pas disponibles.",
                geolocationTimeout: "La demande de localisation a expirÃ©.",
                geolocationUnknownError: "Une erreur inconnue s'est produite lors de la dÃ©tection de l'emplacement.",
                geolocationNotSupported: "Votre navigateur ne prend pas en charge l'API de gÃ©olocalisation.",
                madeBy: "CrÃ©Ã© par Richard",
                contactEmail: "E-mail : ",
                contactUs: "(Contactez-nous pour corriger les erreurs lorsque le site web a des problÃ¨mes ou des erreurs de fuseau horaire)",
                musicSectionTitle: "Musique de Fond",
                playMusicButton: "Activer la musique",
                pauseMusicButton: "DÃ©sactiver la musique",
                musicDisclaimer: "Note: Vous ne pouvez pas Ã©couter de la musique directement depuis Spotify/YouTube. Utilisez un lien MP3 direct. Cliquez pour activer/dÃ©sactiver la musique."
            },
            'es-ES': {
                title: "Reloj Digital",
                moonPhases: [
                    "Luna Nueva", "Creciente", "Cuarto Creciente", "Gibosa Creciente", "Luna Llena", "Gibosa Menguante", "Cuarto Menguante", "Menguante"
                ],
                lunarMonths: [
                    "Enero Lunar", "Febrero Lunar", "Marzo Lunar", "Abril Lunar", "Mayo Lunar", "Junio Lunar",
                    "Julio Lunar", "Agosto Lunar", "Septiembre Lunar", "Octubre Lunar", "Noviembre Lunar", "Diciembre Lunar"
                ],
                lunarDateTemplate: "DÃ­a lunar {day}, Mes lunar {month}, AÃ±o {year}",
                lunarDisclaimer: "(Aprox.)",
                timezoneButton: "Detectar mi Zona Horaria",
                timezoneInfoDefault: "Mostrando su zona horaria del sistema.",
                timezoneInfoSystem: "Zona horaria del sistema: ",
                timezoneError: "No se pudo recuperar la zona horaria del sistema.",
                geolocationAttempt: "Intentando detectar ubicaciÃ³n...",
                geolocationSuccess: "UbicaciÃ³n: Lat {lat}, Lon {lon}. Hora mostrada segÃºn la zona horaria de su sistema.",
                geolocationDenied: "Ha denegado el acceso a la ubicaciÃ³n. Por favor, permita para detectar la ubicaciÃ³n.",
                geolocationUnavailable: "La informaciÃ³n de ubicaciÃ³n no estÃ¡ disponible.",
                geolocationTimeout: "La solicitud de ubicaciÃ³n ha caducado.",
                geolocationUnknownError: "OcurriÃ³ un error desconocido al detectar la ubicaciÃ³n.",
                geolocationNotSupported: "Su navegador no soporta la API de Geolocation.",
                madeBy: "Hecho por Richard",
                contactEmail: "Correo electrÃ³nico: ",
                contactUs: "(ContÃ¡ctenos para solucionar errores cuando el sitio web tenga problemas o errores de zona horaria)",
                musicSectionTitle: "MÃºsica de Fondo",
                playMusicButton: "Reproducir MÃºsica",
                pauseMusicButton: "Pausar MÃºsica",
                musicDisclaimer: "Nota: No puedes reproducir mÃºsica directamente desde Spotify/YouTube. Usa un enlace MP3 directo. Haz clic para activar/desactivar la mÃºsica."
            },
            'de-DE': {
                title: "Digitale Uhr",
                moonPhases: [
                    "Neumond", "Zunehmende Sichel", "Erstes Viertel", "Zunehmender Halbmond", "Vollmond", "Abnehmender Halbmond", "Letztes Viertel", "Abnehmende Sichel"
                ],
                lunarMonths: [
                    "Lunarer Januar", "Lunarer Februar", "Lunarer MÃ¤rz", "Lunarer April", "Lunarer Mai", "Lunarer Juni",
                    "Lunarer Juli", "Lunarer August", "Lunarer September", "Lunarer Oktober", "Lunarer November", "Lunarer Dezember"
                ],
                lunarDateTemplate: "Mondtag {day}, Mondmonat {month}, Jahr {year}",
                lunarDisclaimer: "(Ca.)",
                timezoneButton: "Meine Zeitzone erkennen",
                timezoneInfoDefault: "Ihre Systemzeitzone wird angezeigt.",
                timezoneInfoSystem: "Systemzeitzone: ",
                timezoneError: "Systemzeitzone konnte nicht abgerufen werden.",
                geolocationAttempt: "Versuche Standort zu erkennen...",
                geolocationSuccess: "Standort: Lat {lat}, Lon {lon}. Uhrzeit wird entsprechend Ihrer Systemzeitzone angezeigt.",
                geolocationDenied: "Sie haben den Standortzugriff verweigert. Bitte erlauben Sie die Standortbestimmung.",
                geolocationUnavailable: "Standortinformationen sind nicht verfÃ¼gbar.",
                geolocationTimeout: "Standortanfrage ist abgelaufen.",
                geolocationUnknownError: "Ein unbekannter Fehler ist bei der Standortbestimmung aufgetreten.",
                geolocationNotSupported: "Ihr Browser unterstÃ¼tzt die Geolocation API nicht.",
                madeBy: "Erstellt von Richard",
                contactEmail: "E-Mail: ",
                contactUs: "(Kontaktieren Sie uns, um Fehler zu beheben, wenn die Website Probleme oder Zeitzonenfehler aufweist)",
                musicSectionTitle: "Hintergrundmusik",
                playMusicButton: "Musik abspielen",
                pauseMusicButton: "Musik pausieren",
                musicDisclaimer: "Hinweis: Sie kÃ¶nnen Musik nicht direkt von Spotify/YouTube abspielen. Verwenden Sie einen direkten MP3-Link. Klicken Sie, um die Musik ein-/auszuschalten."
            },
            'zh-CN': {
                title: "æ•°å­—æ—¶é’Ÿ",
                moonPhases: [
                    "æ–°æœˆ", "å¨¥çœ‰æœˆ", "ä¸Šå¼¦æœˆ", "ç›ˆå‡¸æœˆ", "æ»¡æœˆ", "äºå‡¸æœˆ", "ä¸‹å¼¦æœˆ", "æ®‹æœˆ"
                ],
                lunarMonths: [
                    "æ­£æœˆ", "äºŒæœˆ", "ä¸‰æœˆ", "å››æœˆ", "äº”æœˆ", "å…­æœˆ",
                    "ä¸ƒæœˆ", "å…«æœˆ", "ä¹æœˆ", "åæœˆ", "å†¬æœˆ", "è…Šæœˆ"
                ],
                lunarDateTemplate: "å†œå† {year} å¹´ {month} {day} æ—¥",
                lunarDisclaimer: "(è¿‘ä¼¼)",
                timezoneButton: "æ£€æµ‹æˆ‘çš„æ—¶åŒº",
                timezoneInfoDefault: "æ­£åœ¨æ˜¾ç¤ºæ‚¨çš„ç³»ç»Ÿæ—¶åŒºã€‚",
                timezoneInfoSystem: "ç³»ç»Ÿæ—¶åŒº: ",
                timezoneError: "æ— æ³•è·å–ç³»ç»Ÿæ—¶åŒºã€‚",
                geolocationAttempt: "æ­£åœ¨å°è¯•æ£€æµ‹ä½ç½®...",
                geolocationSuccess: "ä½ç½®: çº¬åº¦ {lat}, ç»åº¦ {lon}ã€‚æ—¶é—´æ ¹æ®æ‚¨çš„ç³»ç»Ÿæ—¶åŒºæ˜¾ç¤ºã€‚",
                geolocationDenied: "æ‚¨å·²æ‹’ç»ä½ç½®è®¿é—®ã€‚è¯·å…è®¸ä»¥æ£€æµ‹ä½ç½®ã€‚",
                geolocationUnavailable: "ä½ç½®ä¿¡æ¯ä¸å¯ç”¨ã€‚",
                geolocationTimeout: "ä½ç½®è¯·æ±‚è¶…æ—¶ã€‚",
                geolocationUnknownError: "æ£€æµ‹ä½ç½®æ—¶å‘ç”ŸæœªçŸ¥é”™è¯¯ã€‚",
                geolocationNotSupported: "æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒåœ°ç†å®šä½APIã€‚",
                madeBy: "ç”± Richard åˆ¶ä½œ",
                contactEmail: "ç”µå­é‚®ä»¶: ",
                contactUs: "(ç½‘ç«™å‡ºç°é—®é¢˜æˆ–æ—¶åŒºé”™è¯¯æ—¶è¯·è”ç³»æˆ‘ä»¬ä¿®å¤)",
                musicSectionTitle: "èƒŒæ™¯éŸ³ä¹",
                playMusicButton: "æ’­æ”¾éŸ³ä¹",
                pauseMusicButton: "æš‚åœéŸ³ä¹",
                musicDisclaimer: "æ³¨æ„: æ‚¨æ— æ³•ç›´æ¥ä»Spotify/YouTubeæ’­æ”¾éŸ³ä¹ã€‚è¯·ä½¿ç”¨ç›´æ¥çš„MP3é“¾æ¥ã€‚ç‚¹å‡»ä»¥åˆ‡æ¢éŸ³ä¹ã€‚"
            },
            'ja-JP': {
                title: "ãƒ‡ã‚¸ã‚¿ãƒ«æ™‚è¨ˆ",
                moonPhases: [
                    "æ–°æœˆ", "ä¸‰æ—¥æœˆ", "ä¸Šå¼¦ã®æœˆ", "åä¸‰å¤œæœˆ", "æº€æœˆ", "åå…­å¤œæœˆ", "ä¸‹å¼¦ã®æœˆ", "äºŒåå…­å¤œæœˆ"
                ],
                lunarMonths: [
                    "æ—§æš¦1æœˆ", "æ—§æš¦2æœˆ", "æ—§æš¦3æœˆ", "æ—§æš¦4æœˆ", "æ—§æš¦5æœˆ", "æ—§æš¦6æœˆ",
                    "æ—§æš¦7æœˆ", "æ—§æš¦8æœˆ", "æ—§æš¦9æœˆ", "æ—§æš¦10æœˆ", "æ—§æš¦11æœˆ", "æ—§æš¦12æœˆ"
                ],
                lunarDateTemplate: "æ—§æš¦ {year} å¹´ {month} {day} æ—¥",
                lunarDisclaimer: "(æ¦‚ç®—)",
                timezoneButton: "ç§ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æ¤œå‡º",
                timezoneInfoDefault: "ã‚·ã‚¹ãƒ†ãƒ ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚",
                timezoneInfoSystem: "ã‚·ã‚¹ãƒ†ãƒ ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³: ",
                timezoneError: "ã‚·ã‚¹ãƒ†ãƒ ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚",
                geolocationAttempt: "ä½ç½®ã‚’æ¤œå‡ºä¸­...",
                geolocationSuccess: "ä½ç½®: ç·¯åº¦ {lat}, çµŒåº¦ {lon}ã€‚ã‚·ã‚¹ãƒ†ãƒ ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã«å¾“ã£ã¦æ™‚é–“ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚",
                geolocationDenied: "ä½ç½®æƒ…å ±ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æ‹’å¦ã—ã¾ã—ãŸã€‚ä½ç½®æƒ…å ±ã‚’æ¤œå‡ºã™ã‚‹ã«ã¯è¨±å¯ã—ã¦ãã ã•ã„ã€‚",
                geolocationUnavailable: "ä½ç½®æƒ…å ±ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚",
                geolocationTimeout: "ä½ç½®æƒ…å ±è¦æ±‚ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸã€‚",
                geolocationUnknownError: "ä½ç½®æƒ…å ±æ¤œå‡ºä¸­ã«ä¸æ˜ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",
                geolocationNotSupported: "ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯Geolocation APIã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚",
                madeBy: "Richard ä½œ",
                contactEmail: "ãƒ¡ãƒ¼ãƒ«: ",
                contactUs: "(ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«å•é¡Œã‚„ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹å ´åˆã¯ã€ãŠå•ã„åˆã‚ã›ãã ã•ã„)",
                musicSectionTitle: "BGM",
                playMusicButton: "éŸ³æ¥½ã‚’å†ç”Ÿ",
                pauseMusicButton: "éŸ³æ¥½ã‚’ä¸€æ™‚åœæ­¢",
                musicDisclaimer: "æ³¨: Spotify/YouTubeã‹ã‚‰ç›´æ¥éŸ³æ¥½ã‚’å†ç”Ÿã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ç›´æ¥ã®MP3ãƒªãƒ³ã‚¯ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚ã‚¯ãƒªãƒƒã‚¯ã—ã¦éŸ³æ¥½ã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã™ã€‚"
            },
            'ru-RU': {
                title: "Ğ¦Ğ¸Ñ„Ñ€Ğ¾Ğ²Ñ‹Ğµ Ğ§Ğ°ÑÑ‹",
                moonPhases: [
                    "ĞĞ¾Ğ²Ğ¾Ğ»ÑƒĞ½Ğ¸Ğµ", "Ğ Ğ°ÑÑ‚ÑƒÑ‰Ğ¸Ğ¹ Ğ¡ĞµÑ€Ğ¿", "ĞŸĞµÑ€Ğ²Ğ°Ñ Ğ§ĞµÑ‚Ğ²ĞµÑ€Ñ‚ÑŒ", "Ğ Ğ°ÑÑ‚ÑƒÑ‰Ğ°Ñ Ğ›ÑƒĞ½Ğ°", "ĞŸĞ¾Ğ»Ğ½Ğ¾Ğ»ÑƒĞ½Ğ¸Ğµ", "Ğ£Ğ±Ñ‹Ğ²Ğ°ÑÑ‰Ğ°Ñ Ğ›ÑƒĞ½Ğ°", "ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ÑÑ Ğ§ĞµÑ‚Ğ²ĞµÑ€Ñ‚ÑŒ", "Ğ£Ğ±Ñ‹Ğ²Ğ°ÑÑ‰Ğ¸Ğ¹ Ğ¡ĞµÑ€Ğ¿"
                ],
                lunarMonths: [
                    "Ğ›ÑƒĞ½Ğ½Ñ‹Ğ¹ ÑĞ½Ğ²Ğ°Ñ€ÑŒ", "Ğ›ÑƒĞ½Ğ½Ñ‹Ğ¹ Ñ„ĞµĞ²Ñ€Ğ°Ğ»ÑŒ", "Ğ›ÑƒĞ½Ğ½Ñ‹Ğ¹ Ğ¼Ğ°Ñ€Ñ‚", "Ğ›ÑƒĞ½Ğ½Ñ‹Ğ¹ Ğ°Ğ¿Ñ€ĞµĞ»ÑŒ", "Ğ›ÑƒĞ½Ğ½Ñ‹Ğ¹ Ğ¼Ğ°Ğ¹", "Ğ›ÑƒĞ½Ğ½Ñ‹Ğ¹ Ğ¸ÑĞ½ÑŒ",
                    "Ğ›ÑƒĞ½Ğ½Ñ‹Ğ¹ Ğ¸ÑĞ»ÑŒ", "Ğ›ÑƒĞ½Ğ½Ñ‹Ğ¹ Ğ°Ğ²Ğ³ÑƒÑÑ‚", "Ğ›ÑƒĞ½Ğ½Ñ‹Ğ¹ ÑĞµĞ½Ñ‚ÑĞ±Ñ€ÑŒ", "Ğ›ÑƒĞ½Ğ½Ñ‹Ğ¹ Ğ¾ĞºÑ‚ÑĞ±Ñ€ÑŒ", "Ğ›ÑƒĞ½Ğ½Ñ‹Ğ¹ Ğ½Ğ¾ÑĞ±Ñ€ÑŒ", "Ğ›ÑƒĞ½Ğ½Ñ‹Ğ¹ Ğ´ĞµĞºĞ°Ğ±Ñ€ÑŒ"
                ],
                lunarDateTemplate: "Ğ›ÑƒĞ½Ğ½Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ {day}, Ğ›ÑƒĞ½Ğ½Ñ‹Ğ¹ Ğ¼ĞµÑÑÑ† {month}, Ğ“Ğ¾Ğ´ {year}",
                lunarDisclaimer: "(ĞŸÑ€Ğ¸Ğ±Ğ».)",
                timezoneButton: "ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ¹ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ¾ÑÑ",
                timezoneInfoDefault: "ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµÑ‚ÑÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğ¹ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ¾ÑÑ.",
                timezoneInfoSystem: "Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğ¹ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ¾ÑÑ: ",
                timezoneError: "ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğ¹ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ¾ÑÑ.",
                geolocationAttempt: "ĞŸĞ¾Ğ¿Ñ‹Ñ‚ĞºĞ° Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ Ğ¼ĞµÑÑ‚Ğ¾Ğ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ...",
                geolocationSuccess: "ĞœĞµÑÑ‚Ğ¾Ğ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ: Ğ¨Ğ¸Ñ€ {lat}, Ğ”Ğ¾Ğ»Ğ³ {lon}. Ğ’Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµÑ‚ÑÑ Ğ² ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğ¸ Ñ Ğ²Ğ°ÑˆĞ¸Ğ¼ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğ¼ Ñ‡Ğ°ÑĞ¾Ğ²Ñ‹Ğ¼ Ğ¿Ğ¾ÑÑĞ¾Ğ¼.",
                geolocationDenied: "Ğ’Ñ‹ Ğ¾Ñ‚ĞºĞ°Ğ·Ğ°Ğ»Ğ¸ Ğ² Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğµ Ğº Ğ¼ĞµÑÑ‚Ğ¾Ğ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ. ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞ¸Ñ‚Ğµ Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ Ğ¼ĞµÑÑ‚Ğ¾Ğ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ.",
                geolocationUnavailable: "Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ¼ĞµÑÑ‚Ğ¾Ğ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ°.",
                geolocationTimeout: "Ğ’Ñ€ĞµĞ¼Ñ Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° Ğ¼ĞµÑÑ‚Ğ¾Ğ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ¸ÑÑ‚ĞµĞºĞ»Ğ¾.",
                geolocationUnknownError: "ĞŸÑ€Ğ¸ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğ¸ Ğ¼ĞµÑÑ‚Ğ¾Ğ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ½ĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°.",
                geolocationNotSupported: "Ğ’Ğ°Ñˆ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€ Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Geolocation API." ,
                madeBy: "Ğ¡Ğ´ĞµĞ»Ğ°Ğ½Ğ¾ Richard",
                contactEmail: "Ğ­Ğ». Ğ¿Ğ¾Ñ‡Ñ‚Ğ°: ",
                contactUs: "(Ğ¡Ğ²ÑĞ¶Ğ¸Ñ‚ĞµÑÑŒ Ñ Ğ½Ğ°Ğ¼Ğ¸ Ğ´Ğ»Ñ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº, ĞµÑĞ»Ğ¸ Ğ½Ğ° ÑĞ°Ğ¹Ñ‚Ğµ Ğ²Ğ¾Ğ·Ğ½Ğ¸ĞºĞ½ÑƒÑ‚ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ¸Ğ»Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ñ‡Ğ°ÑĞ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾ÑÑĞ°)",
                musicSectionTitle: "Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ğ°Ñ Ğ¼ÑƒĞ·Ñ‹ĞºĞ°",
                playMusicButton: "Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ¼ÑƒĞ·Ñ‹ĞºÑƒ",
                pauseMusicButton: "Ğ’Ñ‹ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ¼ÑƒĞ·Ñ‹ĞºÑƒ",
                musicDisclaimer: "ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ: Ğ’Ñ‹ Ğ½Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ²Ğ¾ÑĞ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ¼ÑƒĞ·Ñ‹ĞºÑƒ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ Ğ¸Ğ· Spotify/YouTube. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¿Ñ€ÑĞ¼ÑƒÑ ÑÑÑ‹Ğ»ĞºÑƒ Ğ½Ğ° MP3. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ¼ÑƒĞ·Ñ‹ĞºÑƒ."
            },
            'ar-SA': { // Arabic (Saudi Arabia)
                title: "Ø³Ø§Ø¹Ø© Ø±Ù‚Ù…ÙŠØ©",
                moonPhases: [
                    "Ù…Ø­Ø§Ù‚", "Ù‡Ù„Ø§Ù„ Ù…ØªØ²Ø§ÙŠØ¯", "ØªØ±Ø¨ÙŠØ¹ Ø£ÙˆÙ„", "Ø£Ø­Ø¯Ø¨ Ù…ØªØ²Ø§ÙŠØ¯", "Ø¨Ø¯Ø±", "Ø£Ø­Ø¯Ø¨ Ù…ØªÙ†Ø§Ù‚Øµ", "ØªØ±Ø¨ÙŠØ¹ Ø£Ø®ÙŠØ±", "Ù‡Ù„Ø§Ù„ Ù…ØªÙ†Ø§Ù‚Øµ"
                ],
                lunarMonths: [
                    "Ù…Ø­Ø±Ù…", "ØµÙØ±", "Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø£ÙˆÙ„", "Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø¢Ø®Ø±", "Ø¬Ù…Ø§Ø¯Ù‰ Ø§Ù„Ø£ÙˆÙ„", "Ø¬Ù…Ø§Ø¯Ù‰ Ø§Ù„Ø¢Ø®Ø±", "Ø±Ø¬Ø¨", "Ø´Ø¹Ø¨Ø§Ù†", "Ø±Ù…Ø¶Ø§Ù†", "Ø´ÙˆØ§Ù„", "Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©", "Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø©"
                ],
                lunarDateTemplate: "Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ù‚Ù…Ø±ÙŠ {day}, Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù‚Ù…Ø±ÙŠ {month}, Ø¹Ø§Ù… {year}",
                lunarDisclaimer: "(ØªÙ‚Ø±ÙŠØ¨ÙŠ)",
                timezoneButton: "Ø§Ù„ÙƒØ´Ù Ø¹Ù† Ù…Ù†Ø·Ù‚ØªÙŠ Ø§Ù„Ø²Ù…Ù†ÙŠØ©",
                timezoneInfoDefault: "ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© Ù„Ù†Ø¸Ø§Ù…Ùƒ.",
                timezoneInfoSystem: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© Ù„Ù„Ù†Ø¸Ø§Ù…: ",
                timezoneError: "ØªØ¹Ø°Ø± Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© Ù„Ù„Ù†Ø¸Ø§Ù….",
                geolocationAttempt: "Ø¬Ø§Ø±ÙŠ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...",
                geolocationSuccess: "Ø§Ù„Ù…ÙˆÙ‚Ø¹: Ø®Ø· Ø¹Ø±Ø¶ {lat}, Ø®Ø· Ø·ÙˆÙ„ {lon}. Ø§Ù„ÙˆÙ‚Øª Ù…Ø¹Ø±ÙˆØ¶ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© Ù„Ù†Ø¸Ø§Ù…Ùƒ.",
                geolocationDenied: "Ù„Ù‚Ø¯ Ø±ÙØ¶Øª Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹.",
                geolocationUnavailable: "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©.",
                geolocationTimeout: "Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø·Ù„Ø¨ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹.",
                geolocationUnknownError: "Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹.",
                geolocationNotSupported: "Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ.",
                madeBy: "ØµÙ†Ø¹ Ø¨ÙˆØ§Ø³Ø·Ø© Ø±ÙŠØªØ´Ø§Ø±Ø¯",
                contactEmail: "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: ",
                contactUs: "(Ø§ØªØµÙ„ Ø¨Ù†Ø§ Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙˆØ§Ø¬Ù‡ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ø´Ø§ÙƒÙ„ Ø£Ùˆ Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©)",
                musicSectionTitle: "Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ©",
                playMusicButton: "ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰",
                pauseMusicButton: "Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…Ø¤Ù‚ØªÙ‹Ø§",
                musicDisclaimer: "Ù…Ù„Ø§Ø­Ø¸Ø©: Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Spotify/YouTube. Ø§Ø³ØªØ®Ø¯Ù… Ø±Ø§Ø¨Ø· MP3 Ù…Ø¨Ø§Ø´Ø±Ù‹Ø§. Ø§Ù†Ù‚Ø± Ù„ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰."
            }
        };

        // Global variable to store the current translation
        let currentTranslation;

        /**
         * This function initializes and updates static UI elements
         * based on the detected language.
         * Parameter:
         * - localeKey: The selected language key from the translations object (e.g., 'vi-VN', 'en-US').
         */
        function initializeUIText(localeKey) {
            currentTranslation = translations[localeKey];

            // Update title
            document.querySelector('h1').textContent = currentTranslation.title;

            // Update timezone button
            document.getElementById('get-timezone-btn').textContent = currentTranslation.timezoneButton;
            document.getElementById('timezone-info').textContent = currentTranslation.timezoneInfoDefault;

            // Update contact information
            const contactInfoDiv = document.getElementById('contact-info');
            contactInfoDiv.querySelector('p:nth-child(1)').textContent = currentTranslation.madeBy;
            contactInfoDiv.querySelector('p:nth-child(2)').innerHTML = `${currentTranslation.contactEmail}<a href="mailto:trannguyen200829@gmail.com" class="text-blue-400 hover:underline">trannguyen200829@gmail.com</a>`;
            contactInfoDiv.querySelector('p:nth-child(3)').textContent = currentTranslation.contactUs;

            // Update music section
            document.getElementById('music-section-title').textContent = currentTranslation.musicSectionTitle;
            const toggleMusicButton = document.getElementById('toggle-music-btn');
            // Update button text based on initial music state (usually paused)
            toggleMusicButton.textContent = currentTranslation.playMusicButton; 
            document.getElementById('music-disclaimer').textContent = currentTranslation.musicDisclaimer;
        }

        /**
         * This function calculates the current moon phase based on the given date.
         * It uses a simple algorithm based on the new moon cycle.
         * Parameters:
         * - date: The current Date() object (UTC).
         * - translations: The current translation object.
         * Returns:
         * - An object containing the translated phase name and corresponding emoji.
         */
        function getMoonPhase(date, translations) {
            // Known recent new moon date (January 6, 2000, 18:15 UT)
            // Use Date.UTC to ensure calculations are not affected by local timezones.
            const epoch = new Date(Date.UTC(2000, 0, 6, 18, 15, 0)); 
            const msPerDay = 24 * 60 * 60 * 1000;         // Milliseconds in a day
            const synodicMonth = 29.53058867;             // Average synodic month cycle (approx. 29.53 days)

            const diffMs = date.getTime() - epoch.getTime();
            let diffDays = diffMs / msPerDay;

            let moonAge = diffDays % synodicMonth;
            if (moonAge < 0) {
                moonAge += synodicMonth; // Ensure positive value
            }

            // Use phase names from the translations object
            const phaseNames = translations.moonPhases;

            if (moonAge < 1.84) return { name: phaseNames[0], emoji: "ğŸŒ‘" };
            if (moonAge < 5.53) return { name: phaseNames[1], emoji: "ğŸŒ’" };
            if (moonAge < 9.22) return { name: phaseNames[2], emoji: "ğŸŒ“" };
            if (moonAge < 12.91) return { name: phaseNames[3], emoji: "ğŸŒ”" };
            if (moonAge < 16.61) return { name: phaseNames[4], emoji: "ğŸŒ•" };
            if (moonAge < 20.30) return { name: phaseNames[5], emoji: "ğŸŒ–" };
            if (moonAge < 23.99) return { name: phaseNames[6], emoji: "ğŸŒ—" };
            if (moonAge < 27.69) return { name: phaseNames[7], emoji: "ğŸŒ˜" };
            return { name: phaseNames[0], emoji: "ğŸŒ‘" }; // Revert to new moon
        }

        /**
         * This function calculates the approximate lunar date, month, and year based on the Gregorian date.
         * IMPORTANT NOTE:
         * This is a VERY SIMPLE AND APPROXIMATE CALCULATION.
         * It DOES NOT represent an accurate and complete lunar calendar (which requires complex algorithms,
         * handling leap months, determining the start of the lunar year, and traditional lunar calendar rules).
         * For real-world accuracy, consider using a specialized lunar calendar library.
         *
         * Parameters:
         * - date: The current Date() object (Gregorian).
         * - translations: The current translation object.
         * Returns:
         * - The translated approximate lunar date, month, and year string.
         */
        function getApproximateLunarDate(date, translations) {
            const msPerDay = 24 * 60 * 60 * 1000;
            const synodicMonth = 29.53058867; // Average length of a synodic month

            const epochNewMoon = new Date(Date.UTC(2000, 0, 6, 18, 15, 0));

            const diffMs = date.getTime() - epochNewMoon.getTime();
            let daysSinceEpoch = diffMs / msPerDay;

            let moonAge = daysSinceEpoch % synodicMonth;
            if (moonAge < 0) {
                moonAge += synodicMonth;
            }

            const lunarDay = Math.floor(moonAge) + 1;

            const totalSynodicCycles = Math.floor(daysSinceEpoch / synodicMonth);
            let lunarMonthApproxIndex = totalSynodicCycles % 12;

            const lunarMonthName = translations.lunarMonths[lunarMonthApproxIndex];
            const lunarYear = date.getFullYear(); // Still using Gregorian year for simplicity

            // Use the translated template
            let lunarDateString = translations.lunarDateTemplate
                .replace('{day}', lunarDay)
                .replace('{month}', lunarMonthName)
                .replace('{year}', lunarYear);
            
            return `${lunarDateString} ${translations.lunarDisclaimer}`;
        }

        /**
         * This function updates the digital clock, moon phase, and approximate lunar date.
         * It gets the current date and time, formats them, and displays them on the page.
         * It also calculates and displays the moon phase and approximate lunar date.
         */
        function updateClock() {
            const now = new Date(); // Get the current Date object

            // Format Gregorian date based on user's locale
            const optionsDate = {
                weekday: 'long', 
                year: 'numeric', 
                month: 'long',   
                day: 'numeric'   
            };
            const dateString = now.toLocaleDateString(navigator.language, optionsDate); 

            // Get moon phase and approximate lunar date with the current translation object
            const moonPhase = getMoonPhase(now, currentTranslation);
            const approxLunarDate = getApproximateLunarDate(now, currentTranslation);

            // Format time based on user's locale
            const optionsTime = {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false // 24-hour format
            };
            const timeString = now.toLocaleTimeString(navigator.language, optionsTime); 

            // Update HTML elements
            document.getElementById('date-display').textContent = dateString; 
            document.getElementById('moon-phase-display').textContent = `${moonPhase.emoji} ${moonPhase.name}`; 
            document.getElementById('lunar-date-display').textContent = approxLunarDate;
            document.getElementById('time-display').textContent = timeString; 
        }

        /**
         * This function displays the user's system timezone.
         */
        function displaySystemTimeZone() {
            const timeZoneElement = document.getElementById('timezone-info');
            try {
                const userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                timeZoneElement.textContent = `${currentTranslation.timezoneInfoSystem}${userTimeZone}`;
            } catch (error) {
                timeZoneElement.textContent = currentTranslation.timezoneError;
                console.error("Error getting system time zone:", error);
            }
        }

        // Event listener for the timezone detection button
        document.getElementById('get-timezone-btn').addEventListener('click', () => {
            const geolocationStatus = document.getElementById('geolocation-status');
            geolocationStatus.textContent = currentTranslation.geolocationAttempt;

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const latitude = position.coords.latitude;
                        const longitude = position.coords.longitude;
                        geolocationStatus.textContent = currentTranslation.geolocationSuccess
                            .replace('{lat}', latitude.toFixed(4))
                            .replace('{lon}', longitude.toFixed(4));
                        displaySystemTimeZone(); 
                    },
                    (error) => {
                        switch (error.code) {
                            case error.PERMISSION_DENIED:
                                geolocationStatus.textContent = currentTranslation.geolocationDenied;
                                break;
                            case error.POSITION_UNAVAILABLE:
                                geolocationStatus.textContent = currentTranslation.geolocationUnavailable;
                                break;
                            case error.TIMEOUT:
                                geolocationStatus.textContent = currentTranslation.geolocationTimeout;
                                break;
                            case error.UNKNOWN_ERROR:
                                geolocationStatus.textContent = currentTranslation.geolocationUnknownError;
                                break;
                        }
                        console.error("Geolocation error:", error);
                    }
                );
            } else {
                geolocationStatus.textContent = currentTranslation.geolocationNotSupported;
            }
        });

        // Event listener for the background music toggle button
        document.getElementById('toggle-music-btn').addEventListener('click', () => {
            const backgroundMusic = document.getElementById('background-music');
            const toggleMusicButton = document.getElementById('toggle-music-btn');

            if (backgroundMusic.paused) {
                backgroundMusic.play()
                    .then(() => {
                        toggleMusicButton.textContent = currentTranslation.pauseMusicButton;
                    })
                    .catch(error => {
                        console.error("Error trying to play music:", error);
                        // Update text to indicate error if music cannot be played
                        document.getElementById('music-disclaimer').textContent = `${currentTranslation.musicDisclaimer} Error: ${error.message}.`;
                    });
            } else {
                backgroundMusic.pause();
                toggleMusicButton.textContent = currentTranslation.playMusicButton;
            }
        });

        // --- Initialization when the page loads ---
        window.onload = function() {
            // Detect user's preferred language from the browser
            const userPreferredLocales = navigator.languages || [navigator.language || 'en-US'];
            let foundLocaleKey = 'en-US'; // Default to English

            // Search for the most suitable translation
            for (const prefLocale of userPreferredLocales) {
                const lowerCasePrefLocale = prefLocale.toLowerCase();
                
                // 1. Try exact match (case-insensitive)
                for (const key in translations) {
                    if (key.toLowerCase() === lowerCasePrefLocale) {
                        foundLocaleKey = key;
                        break; 
                    }
                }
                if (foundLocaleKey !== 'en-US') break; // Found exact match

                // 2. Try to match by base language (case-insensitive)
                const baseLang = lowerCasePrefLocale.split('-')[0];
                for (const key in translations) {
                    if (key.toLowerCase().startsWith(baseLang)) {
                        foundLocaleKey = key;
                        break; 
                    }
                }
                if (foundLocaleKey !== 'en-US') break; // Found base language match
            }

            initializeUIText(foundLocaleKey); // Initialize UI text with the chosen language

            updateClock(); // Update clock for the first time
            displaySystemTimeZone(); // Display system timezone on page load
            setInterval(updateClock, 1000); // Update clock every second
        };
    </script>
</body>
</html>

